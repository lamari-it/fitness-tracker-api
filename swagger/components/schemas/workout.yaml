# Workout Schemas

WorkoutResponse:
  type: object
  properties:
    id:
      type: string
      format: uuid
    user_id:
      type: string
      format: uuid
    title:
      type: string
    description:
      type: string
    difficulty_level:
      type: string
      enum: [beginner, intermediate, advanced]
    estimated_duration:
      type: integer
      description: Duration in minutes
    is_template:
      type: boolean
    visibility:
      type: string
      enum: [private, public, friends]
    is_favorited:
      type: boolean
      description: Whether the authenticated user has favorited this workout
    prescriptions:
      type: array
      items:
        $ref: '#/WorkoutPrescriptionResponse'
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time

CreateWorkoutRequest:
  type: object
  required:
    - title
  properties:
    title:
      type: string
      minLength: 1
      maxLength: 200
    description:
      type: string
      maxLength: 1000
    difficulty_level:
      type: string
      enum: [beginner, intermediate, advanced]
    estimated_duration:
      type: integer
      minimum: 1
      maximum: 600
      description: Duration in minutes
    is_template:
      type: boolean
      default: false
    visibility:
      type: string
      enum: [private, public, friends]
      default: private

UpdateWorkoutRequest:
  type: object
  properties:
    title:
      type: string
      minLength: 1
      maxLength: 200
    description:
      type: string
      maxLength: 1000
    difficulty_level:
      type: string
      enum: [beginner, intermediate, advanced]
    estimated_duration:
      type: integer
      minimum: 1
      maximum: 600
      description: Duration in minutes
    is_template:
      type: boolean
    visibility:
      type: string
      enum: [private, public, friends]

WorkoutPrescriptionResponse:
  type: object
  properties:
    id:
      type: string
      format: uuid
    workout_id:
      type: string
      format: uuid
    exercise_id:
      type: string
      format: uuid
    exercise:
      $ref: './exercise.yaml#/ExerciseResponse'
    group_type:
      type: string
      enum: [standard, superset, circuit, drop_set, giant_set]
    group_order:
      type: integer
    exercise_order:
      type: integer
    sets:
      type: integer
    reps_min:
      type: integer
    reps_max:
      type: integer
    duration_seconds:
      type: integer
    is_timed:
      type: boolean
    rest_seconds:
      type: integer
    weight_kg:
      type: number
      format: float
    rpe_target:
      type: number
      format: float
    notes:
      type: string
    created_at:
      type: string
      format: date-time

CreatePrescriptionGroupRequest:
  type: object
  required:
    - type
    - group_order
    - exercises
  properties:
    type:
      type: string
      enum: [straight, superset, circuit, giant_set, drop_set, pyramid, rest_pause, amrap, emom, hiit, warmup, cooldown]
      description: |
        The type of prescription group:
        - **straight**: Traditional sets with rest between each set (e.g., 3x10 bench press)
        - **superset**: Two exercises performed back-to-back with no rest between them
        - **circuit**: Multiple exercises performed in sequence, repeated for rounds
        - **giant_set**: Three or more exercises performed back-to-back targeting same muscle group
        - **drop_set**: Same exercise repeated with decreasing weight and no rest
        - **warmup**: Light exercises to prepare for the workout
        - **pyramid**: Sets with progressively increasing then decreasing weight
        - **rest_pause**: Brief rest within a set to extend the set
        - **amrap**: As Many Rounds/Reps As Possible in a time limit
        - **emom**: Every Minute On the Minute
        - **hiit**: High-Intensity Interval Training
        - **cooldown**: Light exercises to end the workout
    group_order:
      type: integer
      minimum: 1
      description: The order of this group within the workout
    group_name:
      type: string
      description: Optional name for the group (e.g., "Chest Superset", "Leg Circuit")
    group_rounds:
      type: integer
      minimum: 1
      description: Number of rounds for circuit/superset types
    rest_between_sets:
      type: integer
      minimum: 0
      description: Rest time in seconds between sets or rounds
    group_notes:
      type: string
      maxLength: 500
      description: Notes for the entire group
    exercises:
      type: array
      minItems: 1
      items:
        $ref: '#/PrescriptionExerciseInput'

PrescriptionExerciseInput:
  type: object
  required:
    - exercise_id
    - exercise_order
  properties:
    exercise_id:
      type: string
      format: uuid
      description: The ID of the exercise
    exercise_order:
      type: integer
      minimum: 1
      description: Order of exercise within the group
    sets:
      type: integer
      minimum: 1
      default: 3
      description: Number of sets
    reps:
      type: integer
      minimum: 1
      description: Number of reps per set (use this OR hold_seconds, not both)
    hold_seconds:
      type: integer
      minimum: 1
      description: Duration in seconds for isometric holds (use this OR reps, not both)
    target_weight:
      type: object
      description: Target weight for the exercise
      properties:
        weight_value:
          type: number
          format: float
          description: The weight value
        weight_unit:
          type: string
          enum: [kg, lbs]
          description: The unit of weight
    rpe_value_id:
      type: string
      format: uuid
      description: ID of the RPE value (from global RPE scale)
    notes:
      type: string
      maxLength: 500
      description: Notes specific to this exercise

ReorderPrescriptionGroupsRequest:
  type: object
  required:
    - group_ids
  properties:
    group_ids:
      type: array
      items:
        type: string
        format: uuid
      description: Ordered list of prescription group IDs

WorkoutPlanResponse:
  type: object
  properties:
    id:
      type: string
      format: uuid
    user_id:
      type: string
      format: uuid
    name:
      type: string
    description:
      type: string
    duration_weeks:
      type: integer
    difficulty:
      type: string
      enum: [beginner, intermediate, advanced]
    is_template:
      type: boolean
    is_public:
      type: boolean
    items:
      type: array
      items:
        $ref: '#/WorkoutPlanItemResponse'
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time

CreateWorkoutPlanRequest:
  type: object
  required:
    - name
  properties:
    name:
      type: string
      minLength: 1
      maxLength: 100
    description:
      type: string
      maxLength: 1000
    duration_weeks:
      type: integer
      minimum: 1
      maximum: 52
    difficulty:
      type: string
      enum: [beginner, intermediate, advanced]
    is_template:
      type: boolean
      default: false
    is_public:
      type: boolean
      default: false

UpdateWorkoutPlanRequest:
  type: object
  properties:
    name:
      type: string
      minLength: 1
      maxLength: 100
    description:
      type: string
      maxLength: 1000
    duration_weeks:
      type: integer
      minimum: 1
      maximum: 52
    difficulty:
      type: string
      enum: [beginner, intermediate, advanced]
    is_template:
      type: boolean
    is_public:
      type: boolean

WorkoutPlanItemResponse:
  type: object
  properties:
    id:
      type: string
      format: uuid
    workout_plan_id:
      type: string
      format: uuid
    workout_id:
      type: string
      format: uuid
    workout:
      $ref: '#/WorkoutResponse'
    week_number:
      type: integer
    day_of_week:
      type: integer
      minimum: 1
      maximum: 7
    order:
      type: integer
    created_at:
      type: string
      format: date-time

AddWorkoutToPlanRequest:
  type: object
  required:
    - workout_id
  properties:
    workout_id:
      type: string
      format: uuid
    week_number:
      type: integer
      minimum: 1
    day_of_week:
      type: integer
      minimum: 1
      maximum: 7
    order:
      type: integer
      minimum: 0

UpdatePlanItemRequest:
  type: object
  properties:
    week_number:
      type: integer
      minimum: 1
    day_of_week:
      type: integer
      minimum: 1
      maximum: 7
    order:
      type: integer
      minimum: 0

PlanEnrollmentResponse:
  type: object
  properties:
    id:
      type: string
      format: uuid
    user_id:
      type: string
      format: uuid
    workout_plan_id:
      type: string
      format: uuid
    workout_plan:
      $ref: '#/WorkoutPlanResponse'
    status:
      type: string
      enum: [active, paused, completed, cancelled]
    started_at:
      type: string
      format: date-time
    completed_at:
      type: string
      format: date-time
    current_week:
      type: integer
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time

EnrollInPlanRequest:
  type: object
  required:
    - workout_plan_id
  properties:
    workout_plan_id:
      type: string
      format: uuid

UpdateEnrollmentRequest:
  type: object
  properties:
    status:
      type: string
      enum: [active, paused, completed, cancelled]
    current_week:
      type: integer
      minimum: 1
