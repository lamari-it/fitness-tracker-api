# Workout Endpoints

/workouts:
  get:
    tags:
      - Workouts
    summary: List user workouts
    description: Get all workouts for the authenticated user
    operationId: getUserWorkouts
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/PageParam'
      - $ref: '../components/parameters.yaml#/PageSizeParam'
      - name: difficulty_level
        in: query
        schema:
          type: string
          enum: [beginner, intermediate, advanced]
      - name: is_template
        in: query
        schema:
          type: boolean
      - name: visibility
        in: query
        schema:
          type: string
          enum: [private, public, friends]
      - name: search
        in: query
        description: Search workouts by title
        schema:
          type: string
          maxLength: 100
      - name: muscle_group_id
        in: query
        description: |
          Filter workouts by muscle group(s). Supports multiple values via repeated parameters.
          Example: ?muscle_group_id=uuid1&muscle_group_id=uuid2
        style: form
        explode: true
        schema:
          type: array
          items:
            type: string
            format: uuid
      - name: exercise_id
        in: query
        description: |
          Filter workouts by exercise(s). Supports multiple values via repeated parameters.
          Example: ?exercise_id=uuid1&exercise_id=uuid2
        style: form
        explode: true
        schema:
          type: array
          items:
            type: string
            format: uuid
      - name: mode
        in: query
        description: |
          Filter logic mode for muscle_group_id and exercise_id parameters.
          - **or** (default): Match workouts containing ANY of the specified muscle groups OR exercises
          - **and**: Match workouts containing ALL of the specified muscle groups AND exercises
        schema:
          type: string
          enum: [and, or]
          default: or
      - name: is_favorited
        in: query
        description: Filter to only show favorited workouts
        schema:
          type: boolean
    responses:
      '200':
        description: List of workouts
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      type: array
                      items:
                        $ref: '../components/schemas/workout.yaml#/WorkoutResponse'
                    meta:
                      $ref: '../components/schemas/common.yaml#/PaginationMeta'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'

  post:
    tags:
      - Workouts
    summary: Create a workout
    description: Create a new workout
    operationId: createWorkout
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/workout.yaml#/CreateWorkoutRequest'
    responses:
      '201':
        description: Workout created
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      $ref: '../components/schemas/workout.yaml#/WorkoutResponse'
      '400':
        $ref: '../components/responses.yaml#/BadRequestResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'

/workouts/{id}:
  get:
    tags:
      - Workouts
    summary: Get a workout
    description: Get a specific workout by ID
    operationId: getWorkout
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
    responses:
      '200':
        description: Workout details
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      $ref: '../components/schemas/workout.yaml#/WorkoutResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

  put:
    tags:
      - Workouts
    summary: Update a workout
    description: Update an existing workout
    operationId: updateWorkout
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/workout.yaml#/UpdateWorkoutRequest'
    responses:
      '200':
        description: Workout updated
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      $ref: '../components/schemas/workout.yaml#/WorkoutResponse'
      '400':
        $ref: '../components/responses.yaml#/BadRequestResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

  delete:
    tags:
      - Workouts
    summary: Delete a workout
    description: Delete a workout
    operationId: deleteWorkout
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
    responses:
      '200':
        description: Workout deleted
        content:
          application/json:
            schema:
              $ref: '../components/responses.yaml#/SuccessResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

/workouts/{id}/duplicate:
  post:
    tags:
      - Workouts
    summary: Duplicate a workout
    description: Create a copy of an existing workout
    operationId: duplicateWorkout
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
    responses:
      '201':
        description: Workout duplicated
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      $ref: '../components/schemas/workout.yaml#/WorkoutResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

/workouts/{id}/prescriptions:
  get:
    tags:
      - Workouts
    summary: Get workout prescriptions
    description: Get all prescription groups for a workout
    operationId: getWorkoutPrescriptions
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
    responses:
      '200':
        description: List of prescriptions
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      type: array
                      items:
                        $ref: '../components/schemas/workout.yaml#/WorkoutPrescriptionResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

  post:
    tags:
      - Workouts
    summary: Create prescription group
    description: |
      Add a prescription group to a workout. Different types of prescription groups support different training methodologies.

      ## Prescription Types

      ### Straight Sets
      Traditional sets where you perform all sets of one exercise before moving to the next.
      Best for: Strength training, building muscle with focused effort on single exercises.

      ### Superset
      Two exercises performed back-to-back with no rest between them.
      Best for: Time efficiency, muscle pump, antagonist muscle pairing.

      ### Circuit
      Multiple exercises performed in sequence, then repeated for multiple rounds.
      Best for: Cardio conditioning, full-body workouts, fat loss.

      ### Giant Set
      Three or more exercises targeting the same muscle group, performed back-to-back.
      Best for: Muscle hypertrophy, metabolic stress, advanced training.

      ### Drop Set
      Same exercise repeated with decreasing weight and no rest between drops.
      Best for: Muscle fatigue, hypertrophy, breaking through plateaus.

      ### Warmup
      Light exercises to prepare the body for the main workout.
      Best for: Injury prevention, mobility, activating target muscles.
    operationId: createPrescriptionGroup
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/workout.yaml#/CreatePrescriptionGroupRequest'
          examples:
            straight_sets:
              summary: Straight Sets - Bench Press
              description: Traditional 4 sets of 8 reps bench press with 120 seconds rest
              value:
                type: "straight"
                group_order: 1
                group_name: "Bench Press"
                rest_between_sets: 120
                exercises:
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440001"
                    exercise_order: 1
                    sets: 4
                    reps: 8
                    target_weight:
                      weight_value: 60.0
                      weight_unit: "kg"
            superset:
              summary: Superset - Chest and Back
              description: Antagonist superset pairing bench press with bent-over rows
              value:
                type: "superset"
                group_order: 2
                group_name: "Chest & Back Superset"
                group_rounds: 3
                rest_between_sets: 90
                exercises:
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440001"
                    exercise_order: 1
                    sets: 3
                    reps: 10
                    target_weight:
                      weight_value: 50.0
                      weight_unit: "kg"
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440002"
                    exercise_order: 2
                    sets: 3
                    reps: 10
                    target_weight:
                      weight_value: 40.0
                      weight_unit: "kg"
            circuit:
              summary: Circuit - Full Body
              description: Full body circuit with 4 exercises, 4 rounds, minimal rest
              value:
                type: "circuit"
                group_order: 3
                group_name: "Full Body Burner"
                group_rounds: 4
                rest_between_sets: 30
                group_notes: "Complete all exercises in sequence, rest 30 seconds between rounds"
                exercises:
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440001"
                    exercise_order: 1
                    sets: 1
                    reps: 12
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440002"
                    exercise_order: 2
                    sets: 1
                    reps: 12
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440003"
                    exercise_order: 3
                    sets: 1
                    reps: 15
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440004"
                    exercise_order: 4
                    sets: 1
                    reps: 20
            giant_set:
              summary: Giant Set - Shoulder Destroyer
              description: Four shoulder exercises performed back-to-back for maximum pump
              value:
                type: "giant_set"
                group_order: 4
                group_name: "Shoulder Giant Set"
                group_rounds: 3
                rest_between_sets: 120
                group_notes: "No rest between exercises, 2 min rest after completing all 4"
                exercises:
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440010"
                    exercise_order: 1
                    sets: 1
                    reps: 10
                    target_weight:
                      weight_value: 20.0
                      weight_unit: "kg"
                    notes: "Overhead Press"
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440011"
                    exercise_order: 2
                    sets: 1
                    reps: 12
                    target_weight:
                      weight_value: 8.0
                      weight_unit: "kg"
                    notes: "Lateral Raises"
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440012"
                    exercise_order: 3
                    sets: 1
                    reps: 12
                    target_weight:
                      weight_value: 8.0
                      weight_unit: "kg"
                    notes: "Front Raises"
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440013"
                    exercise_order: 4
                    sets: 1
                    reps: 15
                    target_weight:
                      weight_value: 6.0
                      weight_unit: "kg"
                    notes: "Rear Delt Flyes"
            drop_set:
              summary: Drop Set - Bicep Curls
              description: Three drops with decreasing weight, no rest between drops
              value:
                type: "drop_set"
                group_order: 5
                group_name: "Bicep Curl Drop Set"
                group_notes: "Perform to failure at each weight, immediately drop weight and continue"
                exercises:
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440020"
                    exercise_order: 1
                    reps: 8
                    target_weight:
                      weight_value: 15.0
                      weight_unit: "kg"
                    notes: "Heavy - 8 reps"
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440020"
                    exercise_order: 2
                    reps: 10
                    target_weight:
                      weight_value: 10.0
                      weight_unit: "kg"
                    notes: "Medium - 10 reps"
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440020"
                    exercise_order: 3
                    reps: 12
                    target_weight:
                      weight_value: 5.0
                      weight_unit: "kg"
                    notes: "Light - 12 reps to failure"
            warmup:
              summary: Warmup - Upper Body Prep
              description: Light warmup exercises before main workout
              value:
                type: "warmup"
                group_order: 1
                group_name: "Upper Body Warmup"
                group_notes: "Light weight, focus on range of motion and activation"
                exercises:
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440030"
                    exercise_order: 1
                    sets: 2
                    reps: 15
                    notes: "Arm Circles"
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440031"
                    exercise_order: 2
                    sets: 2
                    reps: 10
                    target_weight:
                      weight_value: 5.0
                      weight_unit: "kg"
                    notes: "Light Shoulder Press"
                  - exercise_id: "550e8400-e29b-41d4-a716-446655440032"
                    exercise_order: 3
                    sets: 1
                    hold_seconds: 30
                    notes: "Plank Hold - Core Activation"
    responses:
      '201':
        description: Prescription group created
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      type: array
                      items:
                        $ref: '../components/schemas/workout.yaml#/WorkoutPrescriptionResponse'
      '400':
        $ref: '../components/responses.yaml#/BadRequestResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

/workouts/{id}/prescriptions/reorder:
  put:
    tags:
      - Workouts
    summary: Reorder prescription groups
    description: Change the order of prescription groups in a workout
    operationId: reorderPrescriptionGroups
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/workout.yaml#/ReorderPrescriptionGroupsRequest'
    responses:
      '200':
        description: Prescriptions reordered
        content:
          application/json:
            schema:
              $ref: '../components/responses.yaml#/SuccessResponse'
      '400':
        $ref: '../components/responses.yaml#/BadRequestResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

/workouts/{id}/prescriptions/{group_id}:
  put:
    tags:
      - Workouts
    summary: Update prescription group
    description: Update a prescription group in a workout
    operationId: updatePrescriptionGroup
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
      - name: group_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/workout.yaml#/CreatePrescriptionGroupRequest'
    responses:
      '200':
        description: Prescription group updated
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      $ref: '../components/schemas/workout.yaml#/WorkoutPrescriptionResponse'
      '400':
        $ref: '../components/responses.yaml#/BadRequestResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

  delete:
    tags:
      - Workouts
    summary: Delete prescription group
    description: Remove a prescription group from a workout
    operationId: deletePrescriptionGroup
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
      - name: group_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Prescription group deleted
        content:
          application/json:
            schema:
              $ref: '../components/responses.yaml#/SuccessResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'

/workouts/{id}/prescriptions/{group_id}/exercises:
  post:
    tags:
      - Workouts
    summary: Add exercise to prescription group
    description: Add an exercise to an existing prescription group
    operationId: addExerciseToPrescriptionGroup
    security:
      - bearerAuth: []
    parameters:
      - $ref: '../components/parameters.yaml#/IdPathParam'
      - name: group_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/workout.yaml#/PrescriptionExerciseInput'
    responses:
      '201':
        description: Exercise added to group
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/responses.yaml#/SuccessResponse'
                - type: object
                  properties:
                    data:
                      $ref: '../components/schemas/workout.yaml#/WorkoutPrescriptionResponse'
      '400':
        $ref: '../components/responses.yaml#/BadRequestResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedResponse'
      '404':
        $ref: '../components/responses.yaml#/NotFoundResponse'
